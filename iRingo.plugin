#!name=iRingo Collection
#!desc=iRingoÂêàÈõÜÔºöLocation„ÄÅMaps„ÄÅWeatherKit„ÄÅSiri
#!author=Cici_WongYS

[Argument]
# üìç Location
PEP.GCC = select,"US","AUTO","HK","TW","SG","US","JP","AU","GB","KR","CA","IE",tag=[Âú∞Âå∫Ê£ÄÊµã] Âú∞ÁêÜÂõΩÂÆ∂ÊàñÂú∞Âå∫‰ª£Á†Å,desc=Ë¶ÅÊõ¥Êîπ‰∏∫ÁöÑÂú∞Âå∫ÊàñÂõΩÂÆ∂ÔºåÊ≠§ÈÄâÈ°πÂΩ±ÂìçWi-FiÊàñÊúâÁ∫øÁΩëÁªú‰∏ãÂõΩÂÆ∂ÂíåÂú∞Âå∫Ê£ÄÊµãÁöÑÁªìÊûú„ÄÇ

# üó∫Ô∏è Maps
GeoManifest.Dynamic.Config.CountryCode = select,"CN","AUTO","HK","TW","SG","US","JP","AU","GB","KR","CA","IE",tag=[Âä®ÊÄÅÈÖçÁΩÆ] ËµÑÊ∫êÊ∏ÖÂçïÁöÑÂõΩÂÆ∂ÊàñÂú∞Âå∫‰ª£Á†Å,desc=Ê≠§ÈÄâÈ°πÂΩ±Âìç‚ÄúÂú∞Âõæ‚ÄùÊï¥‰ΩìÈÖçÁΩÆÂÜÖÂÆπÔºåÂåÖÊã¨‰ª•‰∏ãÁöÑÂú∞ÂõæÂäüËÉΩ‰∏éÊúçÂä°„ÄÇ
UrlInfoSet.Dispatcher = select,"AutoNavi","AUTO","Apple",tag=[URL‰ø°ÊÅØÈõÜ] Ë∞ÉÂ∫¶Âô®,desc=Âú∞ÁÇπÊï∞ÊçÆÊé•Âè£ÔºåÊ≠§ÈÄâÈ°πÂΩ±ÂìçÂÖ¨ÂÖ±ÊåáÂçóÔºåÂÖ¥Ë∂£ÁÇπ(POI)‰∏é‰ΩçÁΩÆ‰ø°ÊÅØÁ≠âÂäüËÉΩ„ÄÇ
UrlInfoSet.Directions = select,"AutoNavi","AUTO","Apple",tag=[URL‰ø°ÊÅØÈõÜ] ÂØºËà™‰∏éETA,desc=ÂØºËà™‰∏éETAÊúçÂä°Êé•Âè£ÔºåÊ≠§ÈÄâÈ°πÂΩ±ÂìçÂØºËà™‰∏éETA(Âà∞ËææÊó∂Èó¥)Á≠âÂäüËÉΩ„ÄÇ
UrlInfoSet.RAP = select,"Apple","AUTO","AutoNavi",tag=[URL‰ø°ÊÅØÈõÜ] ËØÑÂàÜÂíåÁÖßÁâá,desc=ËØÑÂàÜÂíåÁÖßÁâáÊúçÂä°Êé•Âè£ÔºåÊ≠§ÈÄâÈ°πÂΩ±ÂìçËØÑÂàÜÂíåÁÖßÁâáÊúçÂä°‰ª•ÂèäÁÖßÁâá‰ΩøÁî®„ÄÇ
UrlInfoSet.LocationShift = select,"AUTO","AutoNavi","Apple",tag=[URL‰ø°ÊÅØÈõÜ] ÂÆö‰ΩçÊºÇÁßª,desc=ÂÆö‰ΩçÊºÇÁßª‰øÆÊ≠£ÊúçÂä°Êé•Âè£ÔºåÊéßÂà∂ÂÆö‰ΩçÊºÇÁßªÂíåüß≠ÊåáÂçóÈíà‰∏éüìçÂùêÊ†áÁöÑÁªèÁ∫¨Â∫¶„ÄÇ
TileSet.Satellite = select,"HYBRID","AUTO","CN","XX",tag=[Áì¶ÁâáÊï∞ÊçÆÈõÜ] Âç´ÊòüÂõæÂÉè,desc=Ê≠§ÈÄâÈ°πÂΩ±ÂìçÊâÄÂàó‰ΩçÂõæ„ÄÅÂΩ±ÂÉè‰∏éÊ®°ÂûãÊï∞ÊçÆ„ÄÇ
TileSet.Flyover = select,"XX","AUTO","CN",tag=[Áì¶ÁâáÊï∞ÊçÆÈõÜ] È£ûË°å‰øØÁû∞,desc=Ê≠§ÈÄâÈ°πÂΩ±ÂìçÈ£ûË°å‰øØÁû∞ÂÖ®ÁêÉÂêÑÂú∞ÁöÑ‰∏ªË¶ÅÂú∞Ê†áÂíåÂüéÂ∏ÇÂäüËÉΩ„ÄÇ
TileSet.Munin = select,"XX","AUTO","CN",tag=[Áì¶ÁâáÊï∞ÊçÆÈõÜ] ÂõõÂ§ÑÁúãÁúã,desc=Ê≠§ÈÄâÈ°πÂΩ±Âìç 360 Â∫¶ÂÖ®ÊôØËßÜËßíÂú®Êüê‰∫õÂú∞ÁÇπÂõõÂ§ÑÁúãÁúãÂäüËÉΩ„ÄÇ

# üå§ WeatherKit
NextHour.Provider = select,"ColorfulClouds","WeatherKit","QWeather",tag=[Êú™Êù•‰∏ÄÂ∞èÊó∂ÈôçÊ∞¥Âº∫Â∫¶] Êï∞ÊçÆÊ∫ê,desc=ÂßãÁªà‰ºö‰ΩøÁî®ÈÄâÂÆöÁöÑÊï∞ÊçÆÊ∫êÔºåÂ°´Ë°•Êó†ÈôçÊ∞¥ÁõëÊµãÂú∞Âå∫ÁöÑÊï∞ÊçÆ„ÄÇ
AQI.Provider = select,"ColorfulClouds","WeatherKit","QWeather","WAQI",tag=[Á©∫Ê∞îË¥®Èáè] Êï∞ÊçÆÊ∫ê,desc=ÂßãÁªà‰ºö‰ΩøÁî®ÈÄâÂÆöÁöÑÊï∞ÊçÆÊ∫êÔºåÂ°´Ë°•Êó†Á©∫Ê∞îË¥®ÈáèÁõëÊµãÂú∞Âå∫ÁöÑÊï∞ÊçÆ„ÄÇ
AQI.ReplaceProviders = input,"QWeather",tag=[Á©∫Ê∞îË¥®Èáè] ÈúÄË¶ÅÊõøÊç¢ÁöÑ‰æõÂ∫îÂïÜ,desc=ÈÄâ‰∏≠ÁöÑÁ©∫Ê∞îË¥®ÈáèÊï∞ÊçÆÊ∫ê‰ºöË¢´ÊõøÊç¢„ÄÇ
AQI.Local.Scale = select,"WAQI_InstantCast","NONE",tag=[Á©∫Ê∞îË¥®Èáè] Êú¨Âú∞ÊõøÊç¢ÁÆóÊ≥ï,desc=Êú¨Âú∞ÊõøÊç¢Êó∂‰ΩøÁî®ÁöÑÁÆóÊ≥ï
AQI.Local.ReplaceScales = input,"HJ6332012",tag=[Á©∫Ê∞îË¥®Èáè] ÈúÄË¶Å‰øÆÊîπÁöÑÊ†áÂáÜ,desc=ÈÄâ‰∏≠ÁöÑÁ©∫Ê∞îË¥®ÈáèÊ†áÂáÜ‰ºöË¢´ÊõøÊç¢„ÄÇËØ∑Ê≥®ÊÑèÂêÑÂõΩÁõëÊµãÁöÑÊ±°ÊüìÁâ©ÁßçÁ±ªÂèØËÉΩÊúâÊâÄ‰∏çÂêåÔºåËΩ¨Êç¢ÁÆóÊ≥ïÊàñAPIÊú™ÂøÖÈÄÇÂêàÂΩìÂú∞„ÄÇ
AQI.Local.ConvertUnits = switch,false,tag=[Á©∫Ê∞îË¥®Èáè] ËΩ¨Êç¢Ê±°ÊüìÁâ©ËÆ°ÈáèÂçï‰Ωç,desc=Â∞ÜÊ±°ÊüìÁâ©Êï∞ÊçÆÊõøÊç¢‰∏∫ËΩ¨Êç¢Âçï‰ΩçÂêéÁöÑÊï∞ÊçÆÔºåÊñπ‰æøÂØπÁÖßËΩ¨Êç¢ÂêéÁöÑÊ†áÂáÜ„ÄÇÔºà‰∏çÊé®Ëçê„ÄÇ‰∏çÂêåÂçï‰Ωç‰∫íËΩ¨ÂèØËÉΩ‰ºöÊçüÂ§±Á≤æÂ∫¶ÔºåÂØºËá¥Êï∞ÂÄºÂÅèÂ§ßÔºâ
API.ColorfulClouds.Token = input,"",tag=[API] ÂΩ©‰∫ëÂ§©Ê∞î‰ª§Áâå,desc=ÂΩ©‰∫ëÂ§©Ê∞î API ‰ª§Áâå
API.QWeather.Host = select,"devapi.qweather.com","api.qweather.com",tag=[API] ÂíåÈ£éÂ§©Ê∞î‰∏ªÊú∫,desc=ÂíåÈ£éÂ§©Ê∞î API ‰ΩøÁî®ÁöÑ‰∏ªÊú∫Âêç
API.QWeather.Token = input,"",tag=[API] ÂíåÈ£éÂ§©Ê∞î‰ª§Áâå,desc=ÂíåÈ£éÂ§©Ê∞î API ‰ª§Áâå
API.WAQI.Token = input,"",tag=[API] WAQI ‰ª§Áâå,desc=WAQI API ‰ª§ÁâåÔºåÂ°´ÂÜôÊ≠§Â≠óÊÆµÂ∞ÜËá™Âä®‰ΩøÁî®WAQIÈ´òÁ∫ßAPI
# ---------------------------------------
[Rule]
# üìç Location
# > üìç Country Code
DOMAIN,gspe1-ssl.ls.apple.com,DIRECT

# üó∫Ô∏è Maps
# > üó∫Ô∏è Tiles
DOMAIN,gspe19-cn-ssl.ls.apple.com,DIRECT
# > üó∫Ô∏è Dispatcher
DOMAIN,dispatcher.is.autonavi.com,DIRECT
# > üó∫Ô∏è Directions & ETA
DOMAIN,direction2.is.autonavi.com,DIRECT

# üå§ WeatherKit
DOMAIN,weather-analytics-events.apple.com,REJECT-DROP
DOMAIN-SUFFIX,tthr.apple.com,REJECT-DROP
# ---------------------------------------
[Script]
# üìç Location
# > üìç Country Code
http-response ^https?:\/\/gspe1-ssl\.ls\.apple\.com\/pep\/gcc script-path=https://github.com/NSRingo/GeoServices/releases/latest/download/response.bundle.js, requires-body=1, tag=üìç Location.pep.gcc.response, argument=[{PEP.GCC}]

# üó∫Ô∏è Maps
# > üó∫Ô∏è Network Defaults
http-request ^https?:\/\/configuration\.ls\.apple\.com\/config\/defaults script-path=https://github.com/NSRingo/GeoServices/releases/download/v4.1.2/request.bundle.js, tag=üó∫Ô∏è Ô£øMaps.config.defaults.request, argument=[{GeoManifest.Dynamic.Config.CountryCode},{UrlInfoSet.Dispatcher},{UrlInfoSet.Directions},{UrlInfoSet.RAP},{UrlInfoSet.LocationShift},{TileSet.Satellite},{TileSet.Flyover},{TileSet.Munin}]
http-response ^https?:\/\/configuration\.ls\.apple\.com\/config\/defaults script-path=https://github.com/NSRingo/GeoServices/releases/download/v4.1.2/response.bundle.js, requires-body=1, tag=üó∫Ô∏è Ô£øMaps.config.defaults.response, argument=[{GeoManifest.Dynamic.Config.CountryCode},{UrlInfoSet.Dispatcher},{UrlInfoSet.Directions},{UrlInfoSet.RAP},{UrlInfoSet.LocationShift},{TileSet.Satellite},{TileSet.Flyover},{TileSet.Munin}]

# > üó∫Ô∏è Announcements
http-request ^https?:\/\/gspe35-ssl\.ls\.apple\.(com|cn)\/config\/announcements script-path=https://github.com/NSRingo/GeoServices/releases/download/v4.1.2/request.bundle.js, tag=üó∫Ô∏è Ô£øMaps.config.announcements.request, argument=[{GeoManifest.Dynamic.Config.CountryCode},{UrlInfoSet.Dispatcher},{UrlInfoSet.Directions},{UrlInfoSet.RAP},{UrlInfoSet.LocationShift},{TileSet.Satellite},{TileSet.Flyover},{TileSet.Munin}]
http-response ^https?:\/\/gspe35-ssl\.ls\.apple\.(com|cn)\/config\/announcements script-path=https://github.com/NSRingo/GeoServices/releases/download/v4.1.2/response.bundle.js, requires-body=1, binary-body-mode=1, tag=üó∫Ô∏è Ô£øMaps.config.announcements.response, argument=[{GeoManifest.Dynamic.Config.CountryCode},{UrlInfoSet.Dispatcher},{UrlInfoSet.Directions},{UrlInfoSet.RAP},{UrlInfoSet.LocationShift},{TileSet.Satellite},{TileSet.Flyover},{TileSet.Munin}]

# > üó∫Ô∏è Resource Manifest
http-request ^https?:\/\/gspe35-ssl\.ls\.apple\.(com|cn)\/geo_manifest\/dynamic\/config script-path=https://github.com/NSRingo/GeoServices/releases/download/v4.1.2/request.bundle.js, tag=üó∫Ô∏è Ô£øMaps.config.announcements.request, argument=[{GeoManifest.Dynamic.Config.CountryCode},{UrlInfoSet.Dispatcher},{UrlInfoSet.Directions},{UrlInfoSet.RAP},{UrlInfoSet.LocationShift},{TileSet.Satellite},{TileSet.Flyover},{TileSet.Munin}]
http-response ^https?:\/\/gspe35-ssl\.ls\.apple\.(com|cn)\/geo_manifest\/dynamic\/config script-path=https://github.com/NSRingo/GeoServices/releases/download/v4.1.2/response.bundle.js, requires-body=1, binary-body-mode=1, tag=üó∫Ô∏è Ô£øMaps.geo_manifest.dynamic.config.response, argument=[{GeoManifest.Dynamic.Config.CountryCode},{UrlInfoSet.Dispatcher},{UrlInfoSet.Directions},{UrlInfoSet.RAP},{UrlInfoSet.LocationShift},{TileSet.Satellite},{TileSet.Flyover},{TileSet.Munin}]

# üå§ WeatherKit
http-response ^https?:\/\/weatherkit\.apple\.com\/api\/v1\/availability\/ requires-body=1, script-path=https://github.com/NSRingo/WeatherKit/releases/download/v1.9.1/response.bundle.js, tag=üå§ Ô£øWeatherKit.api.v1.availability.response, argument=[{NextHour.Provider},{AQI.Provider},{AQI.ReplaceProviders},{AQI.Local.Scale},{AQI.Local.ReplaceScales},{AQI.Local.ConvertUnits},{API.ColorfulClouds.Token},{API.QWeather.Host},{API.QWeather.Token},{API.WAQI.Token}]
http-response ^https?:\/\/weatherkit\.apple\.com\/api\/v2\/weather\/ requires-body=1, binary-body-mode=1, script-path=https://github.com/NSRingo/WeatherKit/releases/download/v1.9.1/response.bundle.js, tag=üå§ Ô£øWeatherKit.api.v2.weather.response, argument=[{NextHour.Provider},{AQI.Provider},{AQI.ReplaceProviders},{AQI.Local.Scale},{AQI.Local.ReplaceScales},{AQI.Local.ConvertUnits},{API.ColorfulClouds.Token},{API.QWeather.Host},{API.QWeather.Token},{API.WAQI.Token}]

# ‚≠ï Siri
# > ‚≠ï Apple.Parsec.Siri.V2Alpha.SiriSearch
http-request ^https?:\/\/(guzzoni|api2|api-.*)\.smoot\.apple\.com\/apple\.parsec\.siri\.v2alpha\.SiriSearch\/SiriSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/request.bundle.js, requires-body=true, binary-body-mode=true, tag=‚≠ï Siri.SiriSearch.request, argument=CountryCode=US
http-response ^https?:\/\/(guzzoni|api2|api-.*)\.smoot\.apple\.com\/apple\.parsec\.siri\.v2alpha\.SiriSearch\/SiriSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/response.bundle.js, requires-body=true, binary-body-mode=true, tag=‚≠ï Siri.SiriSearch.response, argument=CountryCode=US

# > ‚≠ï Apple.Parsec.Lookup.V1Alpha.LookupSearch
http-request ^https?:\/\/(api-lookup|api2|api-.*)\.smoot\.apple\.com\/apple\.parsec\.lookup\.v1alpha\.LookupSearch\/LookupSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/request.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç Lookup.LookupSearch.request, argument=CountryCode=US
http-response ^https?:\/\/(api-lookup|api2|api-.*)\.smoot\.apple\.com\/apple\.parsec\.lookup\.v1alpha\.LookupSearch\/LookupSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/response.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç Lookup.LookupSearch.response, argument=CountryCode=US

# > ‚≠ï Apple.Parsec.Visualsearch.V2.VisualSearch
http-request ^https?:\/\/(api2|api-.*)\.smoot\.apple\.com\/apple\.parsec\.visualsearch\.v2\.VisualSearch\/VisualSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/request.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç Visualsearch.VisualSearch.request, argument=CountryCode=US
http-response ^https?:\/\/(api2|api-.*)\.smoot\.apple\.com\/apple\.parsec\.visualsearch\.v2\.VisualSearch\/VisualSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/response.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç Visualsearch.VisualSearch.response, argument=CountryCode=US

# > ‚≠ï Apple.Parsec.ResponseFramework.Engagement.V1Alpha.EngagementSearch
http-request ^https?:\/\/(api-.*)\.smoot\.apple\.com\/apple\.parsec\.responseframework\.engagement\.v1alpha\.EngagementSearch\/EngagementSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/request.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç ResponseFramework.Engagement.EngagementSearch.request, argument=CountryCode=US
http-response ^https?:\/\/(api-.*)\.smoot\.apple\.com\/apple\.parsec\.responseframework\.engagement\.v1alpha\.EngagementSearch\/EngagementSearch script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/response.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç ResponseFramework.Engagement.EngagementSearch.response, argument=CountryCode=US

# > ‚≠ï Apple.Parsec.Spotlight.V1Alpha.ZkwSuggestService
http-request ^https?:\/\/(api-.*)\.smoot\.apple\.com\/apple\.parsec\.spotlight\.v1alpha\.ZkwSuggestService\/Suggest script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/request.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç Spotlight.ZkwSuggestService.request, argument=CountryCode=US
http-response ^https?:\/\/(api-.*)\.smoot\.apple\.com\/apple\.parsec\.spotlight\.v1alpha\.ZkwSuggestService\/Suggest script-path=https://raw.githubusercontent.com/NSRingo/Siri/dev/debug/response.bundle.js, requires-body=true, binary-body-mode=true, tag=üîç Spotlight.ZkwSuggestService.response, argument=CountryCode=US
# ---------------------------------------
[MITM]
hostname = gspe1-ssl.ls.apple.com, configuration.ls.apple.com, gspe35-ssl.ls.apple.com, weatherkit.apple.com, guzzoni.smoot.apple.com, api2.smoot.apple.com, api-*.smoot.apple.com


